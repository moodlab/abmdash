---
title: "MDL R01 GABM Participant Dashboard"
---

## Column {width=30%}

### Participants Scheduled Today

```{r}
# Test REDCap API connection
redcap_status <- tryCatch({
  # Simple test to see if we can connect to REDCap
  token <- Sys.getenv("REDCAP_API_TOKEN")
  
  if (token == "" || is.na(token)) {
    "❌ REDCAP_API_TOKEN not configured"
  } else {
    # Try to get metadata as a simple test
    metadata <- abmdash::get_redcap_metadata()
    if (is.null(metadata) || length(metadata) == 0) {
      "❌ REDCap API call failed"
    } else {
      paste("✅ REDCap connected -", length(metadata), "fields available")
    }
  }
}, error = function(e) {
  paste("❌ REDCap error:", e$message)
})

cat("REDCap Status:", redcap_status, "\n")

# Sample data for participants (will be replaced with REDCap data once working)
participants <- data.frame(
  week = c(0, 3, 2, 0, 4),
  name = rep("Jane Doe", 5),
  phone = rep("123-456-7890", 5),
  time = rep("9:30AM", 5),
  type = c("RW", "AT", "AL", "AT", "RW"),
  stringsAsFactors = FALSE
)

participants |>
  setNames(c("Week", "Name", "Phone Number", "Appointment Time", "RA")) |>
  knitr::kable(caption = "Participants Scheduled Today")
```

## Column {width=70%}

### Row {height=15%}

#### Reminders to Send

### Row {height=42.5%}
