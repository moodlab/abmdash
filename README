# abmdash: An R pacakge for creating an automatically updating dashboard

## This package uses pre-commit hooks

We use pre-commit hooks to make sure we don't accidentally make changes to the code that make our lives harder. See [this issue](https://github.com/moodlab/abmdash/issues/2) for more description.

The pre-commit hooks will run on the GitHub repository each time we push updates using Github Actions via the file in `.github/workflows/pre-commit.yml`. This will prevent code from being merged if it doesn't pass the checks.

To install pre-commit hooks locally so you can make sure your code can get merged:

### MacOS

In your terminal (You can use the "Terminal" tab inside of RStudio or Positron OR use spotlight search for "terminal" and open the app that pops up first) run the following code:

```
## Install homebrew if you haven't already (a package manager like CRAN for MacOS)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
## Install pre-commit with homebrew
brew install pre-commit
```

Then, after navigating inside the `abmddash/` directory, go to your R console and run

```
## Confirm you're in your local abmdash directory
getwd()
## Install and set up pre-commit hooks locally
install.packages("precommit")
precommit::use_precommit()
```

### Linux

This can also be done in theory for MacOS

Note: This process should work in theory but hasn't yet been directly tested

In your terminal (You can use the "Terminal" tab inside of RStudio or Positron) run the following code:

```
## Install uv to handle Python environments and installation
curl -LsSf https://astral.sh/uv/install.sh | sh
## Install pre-commit with uv
uv tool install pre-commit
```

Then, after navigating inside the `abmddash/` directory, go to your R console and run

```
## Confirm you're in your local abmdash directory
getwd()
## Install and set up pre-commit hooks locally
install.packages("precommit")
precommit::use_precommit()
```

### Windows

Note: This process should work in theory but hasn't yet been directly tested

In your terminal/powershell run the following code:

```
## Install uv to handle Python environments and installation
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
## Install pre-commit with uv
uv tool install pre-commit
```

Then, after navigating inside the `abmddash/` directory, go to your R console and run

```
## Confirm you're in your local abmdash directory
getwd()
## Install and set up pre-commit hooks locally
install.packages("precommit")
precommit::use_precommit()
```
